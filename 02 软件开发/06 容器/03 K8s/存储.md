# 存储

为了管理存储，`Kubernetes` 提供了以下资源对象：

- Secret：用于管理敏感信息
- ConfigMap：存储配置
- Volume、PV、PVC、StorageClass 等：用来管理存储卷

## ConfigMap

`ConfigMap`是一种API对象，用来将非机密性的数据保存到键值对中。使用时，Pod可以将其用作环境变量、命令行参数或者存储卷中的配置文件。

`ConfigMap`将你的环境配置信息和容器镜像解耦，便于应用配置的修改。

## Secret

`Secret`是一种包含少量敏感信息例如密码、令牌或密钥的对象。这样的信息可能会被放在Pod规约中或者镜像中。使用Secret意味着你不需要在应用程序代码中包含机密数据。

Secret有三种类型：

Service Account：用来访问 Kubernetes API，由 Kubernetes 自动创建，并且会自动挂载到Pod的目录中。

Opaque：base64编码格式的Secret，用来存储密码、密钥等。

kubernetes.io/dockerconfigjson：用来存储私有docker registry的认证信息。

## Persistent Volume

`PersistentVolume`（PV）是由管理员设置的存储，它是群集的一部分。就像节点是集群中的资源一样，PV 也是集群中的资源。PV 是 Volume 之类的卷插件，但具有独立于使用 PV 的 Pod 的生命周期。此 API 对象包含存储实现的细节，即 NFS、iSCSI 或特定于云供应商的存储系统。

`PersistentVolumeClaim`（PVC）是用户存储的请求。它与 Pod 相似。Pod 消耗节点资源，PVC 消耗 PV 资源。Pod 可以请求特定级别的资源（CPU 和内存）。声明可以请求特定的大小和访问模式（例如，可以以读/写一次或 只读多次模式挂载）。

### 类型

PV 持久卷是用插件的形式来实现的。Kubernetes 目前支持以下插件：

- [`cephfs`](https://kubernetes.io/zh-cn/docs/concepts/storage/volumes/#cephfs) - CephFS volume
- [`csi`](https://kubernetes.io/zh-cn/docs/concepts/storage/volumes/#csi) - 容器存储接口 (CSI)
- [`fc`](https://kubernetes.io/zh-cn/docs/concepts/storage/volumes/#fc) - Fibre Channel (FC) 存储
- [`hostPath`](https://kubernetes.io/zh-cn/docs/concepts/storage/volumes/#hostpath) - HostPath 卷 （仅供单节点测试使用；不适用于多节点集群；请尝试使用 `local` 卷作为替代）
- [`iscsi`](https://kubernetes.io/zh-cn/docs/concepts/storage/volumes/#iscsi) - iSCSI (SCSI over IP) 存储
- [`local`](https://kubernetes.io/zh-cn/docs/concepts/storage/volumes/#local) - 节点上挂载的本地存储设备
- [`nfs`](https://kubernetes.io/zh-cn/docs/concepts/storage/volumes/#nfs) - 网络文件系统 (NFS) 存储
- [`rbd`](https://kubernetes.io/zh-cn/docs/concepts/storage/volumes/#rbd) - Rados 块设备 (RBD) 卷

## Storage Class

`StorageClass`为管理员提供了描述存储"class（类）"的方法。不同的class可能会映射到不同的服务质量等级或备份策略，或由集群管理员确定的任意策略。`Kubernetes`本身不清楚各种class代表的什么。这个类的概念在其他存储系统中有时被称为"配置文件"。